#!/bin/bash

# Manage persistent state files for Mistletoe toggles and settings.
# Usage: mistletoe-state <set|clear> <state-name-or-pattern>
# Used to track whether features like suspend, idle lock, etc are enabled or disabled.

STATE_DIR="$HOME/.local/state/mistletoe"
mkdir -p "$STATE_DIR"

COMMAND="$1"
STATE_NAME="$2"

if [[ -z "$COMMAND" ]]; then
  echo "Usage: mistletoe-state <set|clear> <state-name-or-pattern>"
  exit 1
fi

if [[ -z "$STATE_NAME" ]]; then
  echo "Usage: mistletoe-state $COMMAND <state-name>"
  exit 1
fi

case "$COMMAND" in
set) touch "$STATE_DIR/$STATE_NAME" ;;
clear) find "$STATE_DIR" -maxdepth 1 -type f -name "$STATE_NAME" -delete ;;
esac
