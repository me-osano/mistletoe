#!/bin/bash

# Ensure all default .desktop, web apps, and TUIs are installed.

# Copy and sync icon files
mkdir -p ~/.local/share/icons/hicolor/48x48/apps/
cp ~/.local/share/mistletoe/applications/icons/*.png ~/.local/share/icons/hicolor/48x48/apps/
gtk-update-icon-cache ~/.local/share/icons/hicolor &>/dev/null

# Copy .desktop declarations
mkdir -p ~/.local/share/applications
cp ~/.local/share/mistletoe/applications/*.desktop ~/.local/share/applications/
cp ~/.local/share/mistletoe/applications/hidden/*.desktop ~/.local/share/applications/

# Refresh the webapps and TUIs
bash $MISTLETOE_PATH/install/packaging/icons.sh
bash $MISTLETOE_PATH/install/packaging/webapps.sh
bash $MISTLETOE_PATH/install/packaging/tuis.sh

update-desktop-database ~/.local/share/applications
